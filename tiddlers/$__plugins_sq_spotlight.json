{"tiddlers":{"$:/plugins/sq/spotlight/icon":{"title":"$:/plugins/sq/spotlight/icon","text":"<svg width=\"22pt\" height=\"22pt\" viewBox=\"79.466 0 239.584 155.018\">\n  <g>\n    <path d=\"M 137.517 25.89 C 141.796 25.936 148.799 25.936 153.079 25.89 C 157.358 25.841 153.856 25.802 145.298 25.802 C 136.739 25.802 133.237 25.841 137.517 25.89 M 245.403 25.89 C 249.683 25.936 256.685 25.936 260.965 25.89 C 265.245 25.841 261.743 25.802 253.184 25.802 C 244.625 25.802 241.123 25.841 245.403 25.89 M 89.822 39.67 C 85.062 42.277 81.888 48.63 80.536 58.257 L 80.15 61.002 L 80.148 96.358 L 80.146 131.712 L 80.525 134.466 C 81.853 144.128 85.124 150.632 89.984 153.272 C 91.854 154.292 127.26 154.542 126.647 153.534 C 126.572 153.411 126.12 153.041 125.643 152.711 C 121.831 150.091 118.905 143.825 117.598 135.487 L 117.157 132.676 L 117.159 89.896 L 117.16 47.118 L 117.585 44.505 C 117.821 43.065 118.164 41.293 118.351 40.562 C 118.537 39.831 118.689 39.156 118.689 39.059 C 118.689 38.963 112.503 38.896 104.941 38.904 L 91.193 38.924 L 89.822 39.67 M 280.224 40.742 C 281.414 46.093 281.325 42.111 281.325 89.737 C 281.325 137.851 281.426 133.944 280.032 139.78 C 278.559 145.953 275.774 150.88 272.536 153.047 L 271.649 153.641 L 272.858 153.9 C 275.824 154.537 307.199 153.986 308.498 153.271 C 313.603 150.466 316.868 143.75 318.12 133.483 C 318.615 129.427 318.572 62.509 318.073 58.724 C 316.794 49.042 313.49 42.252 308.821 39.717 L 307.288 38.884 L 293.549 38.884 L 279.811 38.884 L 280.224 40.742 M 55.594 207.339 C 57.923 207.388 61.732 207.388 64.06 207.339 C 66.389 207.289 64.484 207.247 59.827 207.247 C 55.171 207.247 53.266 207.289 55.594 207.339 M 151.05 207.339 C 156.122 207.387 164.467 207.387 169.596 207.339 C 174.725 207.291 170.576 207.253 160.376 207.253 C 150.176 207.253 145.979 207.291 151.05 207.339 M 192.428 207.339 C 193.47 207.395 195.175 207.395 196.218 207.339 C 197.26 207.284 196.406 207.236 194.322 207.236 C 192.238 207.236 191.385 207.284 192.428 207.339 M 232.834 207.339 C 233.926 207.395 235.667 207.395 236.704 207.339 C 237.741 207.284 236.848 207.236 234.719 207.236 C 232.59 207.236 231.742 207.284 232.834 207.339 M 310.474 207.339 C 311.516 207.395 313.222 207.395 314.264 207.339 C 315.306 207.284 314.452 207.236 312.368 207.236 C 310.284 207.236 309.431 207.284 310.474 207.339 M 339.663 207.339 C 340.705 207.395 342.41 207.395 343.452 207.339 C 344.494 207.284 343.642 207.236 341.557 207.236 C 339.473 207.236 338.621 207.284 339.663 207.339 M 364.888 207.339 C 369.959 207.387 378.305 207.387 383.434 207.339 C 388.563 207.291 384.414 207.253 374.214 207.253 C 364.013 207.253 359.817 207.291 364.888 207.339 M 308.576 252.943 C 308.576 277.894 308.595 288.101 308.619 275.626 C 308.642 263.151 308.642 242.737 308.619 230.263 C 308.595 217.789 308.576 227.994 308.576 252.943 M 58.934 235.186 C 58.934 242.912 58.955 246.071 58.98 242.208 C 59.006 238.347 59.006 232.026 58.98 228.164 C 58.955 224.302 58.934 227.464 58.934 235.186 M 58.935 280.551 C 58.935 290.318 58.955 294.36 58.98 289.531 C 59.006 284.703 59.006 276.712 58.98 271.774 C 58.955 266.834 58.935 270.78 58.935 280.551 M 219.065 291.042 C 219.065 295.035 219.089 296.673 219.117 294.675 C 219.145 292.677 219.145 289.408 219.117 287.41 C 219.089 285.413 219.065 287.045 219.065 291.042 M 273.463 286.106 C 273.663 286.181 273.99 286.181 274.189 286.106 C 274.388 286.028 274.225 285.964 273.826 285.964 C 273.426 285.964 273.264 286.028 273.463 286.106\" stroke=\"none\" fill=\"#e9ecef\" fill-rule=\"evenodd\" style=\"\"/>\n    <path d=\"M 126.833 26.695 C 125.128 27.013 123.633 28.019 121.439 30.331 C 118.772 33.143 116.15 40.54 115.485 47.133 C 115.035 51.6 114.987 128.882 115.432 133.358 C 116.107 140.157 117.909 145.627 120.864 149.85 C 121.202 150.333 121.527 150.729 121.588 150.729 C 121.649 150.729 121.898 150.995 122.141 151.323 C 124.493 154.47 125.461 154.593 148.183 154.597 C 168.113 154.604 170.35 154.519 169.643 153.759 C 169.427 153.526 169.137 153.326 169 153.319 C 168.52 153.285 166.407 151.001 165.198 149.206 C 163.213 146.263 161.694 142.025 160.648 136.516 L 160.25 134.415 L 160.205 80.389 L 160.16 26.367 L 144.122 26.414 C 135.301 26.442 127.521 26.566 126.833 26.695 M 239.798 79.887 L 239.749 133.448 L 239.272 136.192 C 237.779 144.784 234.806 150.768 230.667 153.505 L 229.75 154.113 L 230.833 154.323 C 232.709 154.682 270.937 154.632 272.583 154.267 C 278.837 152.881 283.439 144.726 284.428 133.285 C 284.781 129.2 284.781 51.35 284.428 47.524 C 284.071 43.652 283.577 41.185 282.62 38.493 C 282.364 37.774 282.027 36.827 281.87 36.386 C 280.628 32.906 277.903 29.257 275.167 27.415 L 273.917 26.572 L 256.882 26.45 L 239.847 26.327 L 239.798 79.887\" stroke=\"none\" fill=\"#ced4da\" fill-rule=\"evenodd\" style=\"\"/>\n    <rect x=\"159.731\" width=\"80.494\" height=\"154.597\" rx=\"13\" ry=\"13\" style=\"fill: rgb(108, 117, 125); fill-rule: evenodd;\"/>\n  </g>\n</svg>"},"$:/plugins/sq/spotlight/readme":{"title":"$:/plugins/sq/spotlight/readme","text":"@@color:red;''Experimental plugin - no support available. Use at your own risk.''@@\n\nLightbox plugin for images based on the [[Spotlightjs library|https://github.com/nextapps-de/spotlight]]. Licensed under the [[Apache License 2.0|https://github.com/nextapps-de/spotlight/blob/master/LICENSE]]."},"$:/plugins/sq/spotlight/spotlight.js":{"title":"$:/plugins/sq/spotlight/spotlight.js","text":"!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?t(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],t):t((e=\"undefined\"!=typeof globalThis?globalThis:e||self).spotlight={})}(this,function(e){\"use strict\";function t(e,t){o(e,t,!0)}function n(e,t){o(e,t)}function o(e,t,n){e.classList[n?\"add\":\"remove\"](t)}function i(e,t,n){n=\"\"+n,e[\"_s_\"+t]!==n&&(e.style.setProperty(t,n),e[\"_s_\"+t]=n)}let s=0;function l(e,t){t&&(i(e,\"transition\",\"none\"),t()),s||(s=e.clientTop&&0),t&&i(e,\"transition\",\"\")}function c(e,t){e.firstChild.nodeValue=t}function r(e,t){return(t||document).getElementsByClassName(e)}function a(e,t,n,o){u(!0,e,t,n,o)}function u(e,t,n,o,i){t[(e?\"add\":\"remove\")+\"EventListener\"](n,o,!i&&!1!==i||i)}function f(e,t){e.stopPropagation(),t&&e.preventDefault()}function d(e){return document.createElement(e)}function p(e,t){i(e,\"display\",t?\"\":\"none\")}function m(e,t){i(e,\"visibility\",t?\"\":\"hidden\")}function h(e,t){i(e,\"transition\",t?\"\":\"none\")}const v=[\"theme\",\"download\",\"play\",\"page\",\"close\",\"autofit\",\"zoom-in\",\"zoom-out\",\"prev\",\"next\",\"fullscreen\"],g={page:1,close:1,autofit:1,\"zoom-in\":1,\"zoom-out\":1,prev:1,next:1,fullscreen:1},y={BACKSPACE:8,ESCAPE:27,SPACEBAR:32,LEFT:37,RIGHT:39,UP:38,NUMBLOCK_PLUS:107,PLUS:187,DOWN:40,NUMBLOCK_MINUS:109,MINUS:189},b=d(\"div\");b.id=\"spotlight\",b.innerHTML=\"<div class=spl-spinner></div><div class=spl-track><div class=spl-scene><div class=spl-pane></div></div></div><div class=spl-header><div class=spl-page> </div></div><div class=spl-progress></div><div class=spl-footer><div class=spl-title> </div><div class=spl-description> </div><div class=spl-button> </div></div><div class=spl-prev></div><div class=spl-next></div>\";const C={},w=d(\"video\");function k(e,t,n,o){let i,s;if(\"node\"!==o){const e=Object.keys(n);for(let l,c=0;c<e.length;c++)if((l=e[c]).length>3&&0===l.indexOf(\"src\"))if(\"video\"===o){const e=C[l];if(e){if(e>0){i=n[l];break}}else{if(w.canPlayType(\"video/\"+l.substring(3).replace(\"-\",\"\").toLowerCase())){C[l]=1,i=n[l];break}C[l]=-1}}else{const e=parseInt(l.substring(4),10);if(e){const o=Math.abs(t-e);(!s||o<s)&&(s=o,i=n[l])}}}return i||n.src||n.href||e.src||e.href}const x={},z=navigator.connection,E=window.devicePixelRatio||1;let S,P,T,N,_,L,U,M,O,A,R,B,F,H,q,I,K,j,D,W,X,Y,G,V,J,Q,Z,$,ee,te,ne,oe,ie,se,le,ce,re,ae,ue,fe,de,pe,me,he,ve,ge,ye,be,Ce,we,ke,xe,ze,Ee,Se,Pe,Te,Ne,_e,Le,Ue,Me,Oe=d(\"img\");function Ae(){if(ue)return;ue=document.body,me=t(\"scene\"),he=t(\"header\"),ve=t(\"footer\"),ge=t(\"title\"),ye=t(\"description\"),be=t(\"button\"),Ce=t(\"prev\"),we=t(\"next\"),xe=t(\"page\"),Ee=t(\"progress\"),Se=t(\"spinner\"),de=[t(\"pane\")],Re(\"close\",vt),ue[Ue=\"requestFullscreen\"]||ue[Ue=\"msRequestFullscreen\"]||ue[Ue=\"webkitRequestFullscreen\"]||ue[Ue=\"mozRequestFullscreen\"]||(Ue=\"\"),Ue?(Me=Ue.replace(\"request\",\"exit\").replace(\"mozRequest\",\"mozCancel\").replace(\"Request\",\"Exit\"),ke=Re(\"fullscreen\",rt)):v.pop(),Re(\"autofit\",ut),Re(\"zoom-in\",ft),Re(\"zoom-out\",dt),Re(\"theme\",at),ze=Re(\"play\",tt),Re(\"download\",ht),a(Ce,\"click\",yt),a(we,\"click\",bt);const e=t(\"track\");function t(e){return x[e]=r(\"spl-\"+e,b)[0]}a(e,\"mousedown\",st),a(e,\"mousemove\",ct),a(e,\"mouseleave\",lt),a(e,\"mouseup\",lt),a(e,\"touchstart\",st,{passive:!1}),a(e,\"touchmove\",ct,{passive:!0}),a(e,\"touchend\",lt),a(be,\"click\",function(){oe?oe(q,j):ne&&(location.href=ne)})}function Re(e,t){const n=d(\"div\");return n.className=\"spl-\"+e,a(n,\"click\",t),he.appendChild(n),x[e]=n}function Be(e){const t=x[e];t&&(he.removeChild(t),x[e]=null)}function Fe(e,t,n){K=e,t&&(W=t,G=t.onshow,V=t.onchange,J=t.onclose,n=n||t.index),He(n)}function He(e){if(I=K.length){ue||Ae(),G&&G(e);const n=de[0],o=n.parentNode;for(let e=de.length;e<I;e++){const t=n.cloneNode(!1);i(t,\"left\",100*e+\"%\"),o.appendChild(t),de[e]=t}fe||(ue.appendChild(b),Xe()),q=e||1,h(me),kt(!0),Ue&&We(),history.pushState({spl:1},\"\"),history.pushState({spl:2},\"\"),h(b,!0),t(ue,\"hide-scrollbars\"),t(b,\"show\"),Qe(!0),Xe(),ot(),$&&tt(!0,!0)}}function qe(e,t){let n=j[e];return void 0!==n?\"false\"!==(n=\"\"+n)&&(n||t):t}function Ie(e){e?l(pe,Ie):(h(me,re),i(pe,\"opacity\",ce?0:1),Ge(le&&.8),ae&&t(pe,ae))}function Ke(e,t){e&&o(Se,\"spin\",t)}function je(){return document.fullscreen||document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement}function De(){if(Xe(),pe&&Ye(),Ue){const e=je();o(ke,\"on\",e),e||We()}}function We(){p(ke,screen.availHeight-window.innerHeight>0)}function Xe(){_=b.clientWidth,L=b.clientHeight}function Ye(){U=pe.clientWidth,M=pe.clientHeight}function Ge(e){i(pe,\"transform\",\"translate(-50%, -50%) scale(\"+(e||O)+\")\")}function Ve(e,t){i(fe,\"transform\",e||t?\"translate(\"+e+\"px, \"+t+\"px)\":\"\")}function Je(e,t,n){t?l(me,function(){Je(e,!1,n)}):i(me,\"transform\",\"translateX(\"+(100*-e+(n||0))+\"%)\")}function Qe(e){u(e,window,\"keydown\",$e),u(e,window,\"wheel\",et),u(e,window,\"resize\",De),u(e,window,\"popstate\",Ze)}function Ze(e){fe&&e.state.spl&&vt(!0)}function $e(e){if(fe){const t=!1!==j[\"zoom-in\"];switch(e.keyCode){case y.BACKSPACE:t&&ut();break;case y.ESCAPE:vt();break;case y.SPACEBAR:$&&tt();break;case y.LEFT:yt();break;case y.RIGHT:bt();break;case y.UP:case y.NUMBLOCK_PLUS:case y.PLUS:t&&ft();break;case y.DOWN:case y.NUMBLOCK_MINUS:case y.MINUS:t&&dt()}}}function et(e){if(fe&&!1!==j[\"zoom-in\"]){let t=e.deltaY;(t=.5*(t<0?1:t?-1:0))<0?dt():ft()}}function tt(e,t){(\"boolean\"==typeof e?e:!Ne)===!Ne&&(Ne=Ne?clearTimeout(Ne):1,o(ze,\"on\",Ne),t||nt(Ne))}function nt(e){Y&&(l(Ee,function(){i(Ee,\"transition-duration\",\"\"),i(Ee,\"transform\",\"\")}),e&&(i(Ee,\"transition-duration\",se+\"s\"),i(Ee,\"transform\",\"translateX(0)\"))),e&&(Ne=setTimeout(bt,1e3*se))}function ot(){Z&&(Le=Date.now()+2950,_e||(t(b,\"menu\"),function e(t){_e=setTimeout(function(){const t=Date.now();t>=Le?(n(b,\"menu\"),_e=0):e(Le-t)},t)}(3e3)))}function it(e){\"boolean\"==typeof e&&(_e=e?_e:0),_e?(_e=clearTimeout(_e),n(b,\"menu\")):ot()}function st(e){f(e,!0),A=!0,R=!1;let t=e.touches;t&&(t=t[0])&&(e=t),B=U*O<=_,T=e.pageX,N=e.pageY,h(fe)}function lt(e){if(f(e),A){if(R){if(B&&R){const e=S<-_/7&&(q<I||X),t=e||S>_/7&&(q>1||X);(e||t)&&(Je(q-1,!0,S/_*100),e&&bt()||t&&yt()),S=0,Ve()}h(fe,!0)}else it();A=!1}}function ct(e){if(f(e),A){let t=e.touches;t&&(t=t[0])&&(e=t);let n=(U*O-_)/2;S-=T-(T=e.pageX),B||(S>n?S=n:S<-n&&(S=-n),M*O>L&&(n=(M*O-L)/2,(P-=N-(N=e.pageY))>n?P=n:P<-n&&(P=-n))),R=!0,Ve(S,P)}else ot()}function rt(e){const t=je();\"boolean\"==typeof e&&e===!!t||(t?document[Me]():b[Ue]())}function at(e){\"string\"!=typeof e&&(e=H?\"\":ee||\"white\"),H!==e&&(H&&n(b,H),e&&t(b,e),H=e)}function ut(e){\"boolean\"==typeof e&&(F=!e),o(pe,\"autofit\",F=1===O&&!F),i(pe,\"transform\",\"\"),O=1,S=0,P=0,Ye(),h(fe),Ve()}function ft(e){let t=O/.65;t<=50&&(mt(),Ve(S/=.65,P/=.65),pt(t))}function dt(e){let t=.65*O;mt(),t>=1&&(1===t?S=P=0:(S*=.65,P*=.65),Ve(S,P),pt(t))}function pt(e){O=e||1,Ge()}function mt(){F&&ut()}function ht(){!function(e,t){const n=d(\"a\"),o=t.src;n.href=o,n.download=o.substring(o.lastIndexOf(\"/\")+1),e.appendChild(n),n.click(),e.removeChild(n)}(ue,pe)}function vt(e){setTimeout(function(){ue.removeChild(b),fe=pe=Pe=j=W=K=G=V=J=oe=null},200),n(ue,\"hide-scrollbars\"),n(b,\"show\"),rt(!1),Qe(),history.go(!0===e?-1:-2),Te&&(Oe.src=\"\"),Ne&&tt(),pe&&gt(pe),_e&&(_e=clearTimeout(_e)),H&&at(),ie&&n(b,ie),J&&J()}function gt(e){if(e._root)e._root.appendChild(e),e._root=null;else{const t=e.parentNode;t&&t.removeChild(e),e=e.src=e.onerror=\"\"}}function yt(e){if(e&&ot(),I>1){if(q>1)return Ct(q-1);if(X)return Je(I,!0),Ct(I)}}function bt(e){if(e&&ot(),I>1){if(q<I)return Ct(q+1);if(X)return Je(-1,!0),Ct(1);Ne&&tt()}}function Ct(e){if(e!==q){Ne?(clearTimeout(Ne),nt()):ot();const t=e>q;return q=e,kt(t),!0}}function wt(e){let n=K[q-1];!function(e){j={},W&&Object.assign(j,W),Object.assign(j,e.dataset||e),D=j.media,oe=j.onclick,ee=j.theme,ie=j.class,Z=qe(\"autohide\",!0),X=qe(\"infinite\"),Y=qe(\"progress\",!0),$=qe(\"autoslide\"),te=qe(\"preload\",!0),ne=j.buttonHref,se=$&&parseFloat($)||7,H||ee&&at(ee),ie&&t(b,ie),ie&&l(b);const n=j.control;if(n){const e=\"string\"==typeof n?n.split(\",\"):n;for(let e=0;e<v.length;e++)j[v[e]]=!1;for(let t=0;t<e.length;t++){const n=e[t].trim();\"zoom\"===n?j[\"zoom-in\"]=j[\"zoom-out\"]=!0:j[n]=!0}}const o=j.animation;if(le=ce=re=!o,ae=!1,o){const e=\"string\"==typeof o?o.split(\",\"):o;for(let t=0;t<e.length;t++){const n=e[t].trim();\"scale\"===n?le=!0:\"fade\"===n?ce=!0:\"slide\"===n?re=!0:n&&(ae=n)}}Q=j.fit}(n);const o=z&&z.downlink;let i,s=Math.max(L,_)*E;if(o&&1200*o<s&&(s=1200*o),Pe={media:D,src:k(n,s,j,D),title:qe(\"title\",n.alt||n.title||(i=n.firstElementChild)&&(i.alt||i.title))},Te&&(Oe.src=Te=\"\"),te&&e&&(n=K[q])){const e=n.dataset||n,t=e.media;t&&\"image\"!==t||(Te=k(n,s,e,t))}for(let e=0;e<v.length;e++){const t=v[e];p(x[t],qe(t,g[t]))}}function kt(e){if(S=0,P=0,O=1,pe)if(pe.onerror)gt(pe);else{let e=pe;setTimeout(function(){e&&pe!==e&&(gt(e),e=null)},650),Ie(),Ve()}wt(e),Je(q-1),n(Se,\"error\"),function e(o){if(fe=de[o-1],pe=fe.firstChild,q=o,pe)mt(),Q&&t(pe,Q),Ie(!0),ae&&n(pe,ae),ce&&i(pe,\"opacity\",1),le&&i(pe,\"transform\",\"\"),i(pe,\"visibility\",\"visible\"),Te&&(Oe.src=Te),$&&nt(Ne);else{const n=Pe.media,s=qe(\"spinner\",!0);if(\"video\"===n)Ke(s,!0),(pe=d(\"video\")).onloadedmetadata=function(){pe===this&&(pe.onerror=null,pe.width=pe.videoWidth,pe.height=pe.videoHeight,Ye(),Ke(s),e(o))},pe.poster=j.poster,pe.preload=te?\"auto\":\"metadata\",pe.controls=qe(\"controls\",!0),pe.autoplay=j.autoplay,pe.playsinline=qe(\"inline\"),pe.muted=qe(\"muted\"),pe.src=Pe.src,fe.appendChild(pe);else{if(\"node\"===n)return\"string\"==typeof(pe=Pe.src)&&(pe=document.querySelector(pe)),void(pe&&(pe._root||(pe._root=pe.parentNode),Ye(),fe.appendChild(pe),e(o)));Ke(s,!0),(pe=d(\"img\")).onload=function(){pe===this&&(pe.onerror=null,Ke(s),e(o),Ye())},pe.src=Pe.src,fe.appendChild(pe)}pe&&(s||i(pe,\"visibility\",\"visible\"),pe.onerror=function(){pe===this&&(gt(pe),t(Se,\"error\"),Ke(s))})}}(q),h(fe),Ve();const o=Pe.title,s=qe(\"description\"),l=qe(\"button\"),r=o||s||l;r&&(o&&c(ge,o),s&&c(ye,s),l&&c(be,l),p(ge,o),p(ye,s),p(be,l),i(ve,\"transform\",\"all\"===Z?\"\":\"none\")),Z||t(b,\"menu\"),m(ve,r),m(Ce,X||q>1),m(we,X||q<I),c(xe,I>1?q+\" / \"+I:\"\"),V&&V(q,j)}a(document,\"click\",function(e){const t=e.target.closest(\".spotlight\");if(t){f(e,!0);const n=t.closest(\".spotlight-group\");K=r(\"spotlight\",n);for(let e=0;e<K.length;e++)if(K[e]===t){W=n&&n.dataset,He(e+1);break}}});var xt={init:Ae,theme:at,fullscreen:rt,download:ht,autofit:ut,next:bt,prev:yt,goto:Ct,close:vt,zoom:pt,menu:it,show:Fe,play:tt,addControl:Re,removeControl:Be};e.addControl=Re,e.autofit=ut,e.close=vt,e.default=xt,e.download=ht,e.fullscreen=rt,e.goto=Ct,e.init=Ae,e.menu=it,e.next=bt,e.play=tt,e.prev=yt,e.removeControl=Be,e.show=Fe,e.theme=at,e.zoom=pt,Object.defineProperty(e,\"__esModule\",{value:!0})});","type":"application/javascript","module-type":"library"},"$:/plugins/sq/spotlight/spotlight.css":{"title":"$:/plugins/sq/spotlight/spotlight.css","text":"@keyframes pulsate{0%,to{opacity:1}50%{opacity:.2}}#spotlight{position:fixed;top:-1px;bottom:-1px;width:100%;z-index:99999;color:#fff;background-color:#000;opacity:0;overflow:hidden;-webkit-user-select:none;-ms-user-select:none;user-select:none;transition:opacity .2s ease-out;font-family:Arial,sans-serif;font-size:16px;font-weight:400;contain:strict;touch-action:none;pointer-events:none}#spotlight.show{opacity:1;transition:none;pointer-events:auto}#spotlight.white{color:#212529;background-color:#fff}#spotlight.white .spl-next,#spotlight.white .spl-page~*,#spotlight.white .spl-prev,#spotlight.white .spl-spinner{filter:invert(1)}#spotlight.white .spl-progress{background-color:rgba(0,0,0,.35)}#spotlight.white .spl-footer,#spotlight.white .spl-header{background-color:rgba(255,255,255,.65)}#spotlight.white .spl-button{background:#212529;color:#fff}.spl-footer,.spl-header{background-color:rgba(0,0,0,.45)}#spotlight .contain,#spotlight .cover{object-fit:cover;height:100%;width:100%}#spotlight .contain{object-fit:contain}#spotlight .autofit{object-fit:none;width:auto;height:auto;max-height:none;max-width:none;transition:none}.spl-scene,.spl-spinner,.spl-track{width:100%;height:100%;position:absolute}.spl-track{contain:strict}.spl-spinner{background-position:center;background-repeat:no-repeat;background-size:42px;opacity:0}.spl-spinner.spin{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzgiIGhlaWdodD0iMzgiIHZpZXdCb3g9IjAgMCAzOCAzOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBzdHJva2U9IiNmZmYiPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMSAxKSIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2Utb3BhY2l0eT0iLjY1Ij48Y2lyY2xlIHN0cm9rZS1vcGFjaXR5PSIuMTUiIGN4PSIxOCIgY3k9IjE4IiByPSIxOCIvPjxwYXRoIGQ9Ik0zNiAxOGMwLTkuOTQtOC4wNi0xOC0xOC0xOCI+PGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIGZyb209IjAgMTggMTgiIHRvPSIzNjAgMTggMTgiIGR1cj0iMXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIi8+PC9wYXRoPjwvZz48L2c+PC9zdmc+);transition:opacity .2s linear .25s;opacity:1}.spl-spinner.error{background-image:url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjMyIiB3aWR0aD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMTYsMUExNSwxNSwwLDEsMCwzMSwxNiwxNSwxNSwwLDAsMCwxNiwxWm0wLDJhMTMsMTMsMCwwLDEsOC40NSwzLjE0TDYuMTQsMjQuNDVBMTMsMTMsMCwwLDEsMTYsM1ptMCwyNmExMywxMywwLDAsMS04LjQ1LTMuMTRMMjUuODYsNy41NUExMywxMywwLDAsMSwxNiwyOVoiIGlkPSJiYW5fc2lnbl9jcm9zc2VkX2NpcmNsZSIvPjwvc3ZnPg==);background-size:128px;transition:none;opacity:.5}.spl-scene{transition:transform .65s cubic-bezier(.1,1,.1,1);contain:layout size;will-change:transform}.spl-pane>*{position:absolute;width:auto;height:auto;max-width:100%;max-height:100%;left:50%;top:50%;margin:0;padding:0;border:0;transform:translate(-50%,-50%) scale(1);transition:transform .65s cubic-bezier(.3,1,.3,1),opacity .65s ease;contain:layout style;will-change:transform,opacity;visibility:hidden}.spl-header,.spl-pane,.spl-progress{position:absolute;top:0}.spl-pane{width:100%;height:100%;transition:transform .65s cubic-bezier(.3,1,.3,1);contain:layout size;will-change:transform,contents}.spl-header{width:100%;height:50px;text-align:right;transform:translateY(-100px);transition:transform .35s ease;overflow:hidden;will-change:transform}#spotlight.menu .spl-footer,#spotlight.menu .spl-header,.spl-footer:hover,.spl-header:hover{transform:translateY(0)}.spl-header div{display:inline-block;vertical-align:middle;white-space:nowrap;width:50px;height:50px;opacity:.5}.spl-progress{width:100%;height:3px;background-color:rgba(255,255,255,.45);transform:translateX(-100%);transition:transform linear}.spl-footer,.spl-next,.spl-prev{position:absolute;transition:transform .35s ease;will-change:transform}.spl-footer{left:0;right:0;bottom:0;line-height:20px;padding:20px 20px 0;padding-bottom:env(safe-area-inset-bottom,0);text-align:left;font-size:15px;font-weight:400;transform:translateY(100%)}.spl-title{font-size:22px}.spl-button,.spl-description,.spl-title{margin-bottom:20px}.spl-button{display:inline-block;background:#fff;color:#000;border-radius:5px;padding:10px 20px;cursor:pointer}.spl-next,.spl-page~*,.spl-prev{background-position:center;background-repeat:no-repeat}.spl-page{float:left;width:auto;line-height:50px}.spl-page~*{background-size:21px;float:right}.spl-fullscreen{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjI0IiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyLjUiIHZpZXdCb3g9Ii0xIC0xIDI2IDI2IiB3aWR0aD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTggM0g1YTIgMiAwIDAgMC0yIDJ2M20xOCAwVjVhMiAyIDAgMCAwLTItMmgtM20wIDE4aDNhMiAyIDAgMCAwIDItMnYtM00zIDE2djNhMiAyIDAgMCAwIDIgMmgzIi8+PC9zdmc+)}.spl-fullscreen.on{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjI0IiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyLjUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik04IDN2M2EyIDIgMCAwIDEtMiAySDNtMTggMGgtM2EyIDIgMCAwIDEtMi0yVjNtMCAxOHYtM2EyIDIgMCAwIDEgMi0yaDNNMyAxNmgzYTIgMiAwIDAgMSAyIDJ2MyIvPjwvc3ZnPg==)}.spl-autofit{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+PHN2ZyBoZWlnaHQ9Ijk2cHgiIHZpZXdCb3g9IjAgMCA5NiA5NiIgd2lkdGg9Ijk2cHgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggdHJhbnNmb3JtPSJyb3RhdGUoOTAgNTAgNTApIiBmaWxsPSIjZmZmIiBkPSJNNzEuMzExLDgwQzY5LjY3LDg0LjY2LDY1LjIzLDg4LDYwLDg4SDIwYy02LjYzLDAtMTItNS4zNy0xMi0xMlYzNmMwLTUuMjMsMy4zNC05LjY3LDgtMTEuMzExVjc2YzAsMi4yMSwxLjc5LDQsNCw0SDcxLjMxMSAgeiIvPjxwYXRoIHRyYW5zZm9ybT0icm90YXRlKDkwIDUwIDUwKSIgZmlsbD0iI2ZmZiIgZD0iTTc2LDhIMzZjLTYuNjMsMC0xMiw1LjM3LTEyLDEydjQwYzAsNi42Myw1LjM3LDEyLDEyLDEyaDQwYzYuNjMsMCwxMi01LjM3LDEyLTEyVjIwQzg4LDEzLjM3LDgyLjYzLDgsNzYsOHogTTgwLDYwICBjMCwyLjIxLTEuNzksNC00LDRIMzZjLTIuMjEsMC00LTEuNzktNC00VjIwYzAtMi4yMSwxLjc5LTQsNC00aDQwYzIuMjEsMCw0LDEuNzksNCw0VjYweiIvPjwvc3ZnPg==)}.spl-zoom-in,.spl-zoom-out{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjI0IiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIxMSIgY3k9IjExIiByPSI4Ii8+PGxpbmUgeDE9IjIxIiB4Mj0iMTYuNjUiIHkxPSIyMSIgeTI9IjE2LjY1Ii8+PGxpbmUgeDE9IjgiIHgyPSIxNCIgeTE9IjExIiB5Mj0iMTEiLz48L3N2Zz4=);background-size:22px}.spl-zoom-in{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjI0IiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIxMSIgY3k9IjExIiByPSI4Ii8+PGxpbmUgeDE9IjIxIiB4Mj0iMTYuNjUiIHkxPSIyMSIgeTI9IjE2LjY1Ii8+PGxpbmUgeDE9IjExIiB4Mj0iMTEiIHkxPSI4IiB5Mj0iMTQiLz48bGluZSB4MT0iOCIgeDI9IjE0IiB5MT0iMTEiIHkyPSIxMSIvPjwvc3ZnPg==)}.spl-download{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjxzdmcgaGVpZ2h0PSIxNDEuNzMycHgiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDE0MS43MzIgMTQxLjczMiIgd2lkdGg9IjE0MS43MzJweCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSIjZmZmIj48cGF0aCBkPSJNMTIwLjY3NCwxMjUuMTM4SDIwLjc5M3YxNi41OTRoOTkuODgxVjEyNS4xMzh6IE0xMTkuMDE5LDU4Ljc3NmMtMi41NjEtMi41NjItNi43MTYtMi41NjItOS4yNzUsMEw3Ny4yMSw5MS4zMTJWNi41NjIgICBDNzcuMjEsMi45MzYsNzQuMjY5LDAsNzAuNjQ4LDBjLTMuNjI0LDAtNi41NiwyLjkzNy02LjU2LDYuNTYzdjg0Ljc1TDMxLjk5Miw1OS4yMThjLTIuNTYyLTIuNTY0LTYuNzE1LTIuNTY0LTkuMjc3LDAgICBjLTIuNTY1LDIuNTYyLTIuNTY1LDYuNzE2LDAsOS4yNzlsNDMuMjk0LDQzLjI5M2MwLjE1LDAuMTU0LDAuMzE0LDAuMjk5LDAuNDgxLDAuNDM4YzAuMDc2LDAuMDYyLDAuMTU1LDAuMTEzLDAuMjM0LDAuMTc2ICAgYzAuMDk0LDAuMDY1LDAuMTg2LDAuMTQyLDAuMjc5LDAuMjA2YzAuMDk3LDAuMDYzLDAuMTkyLDAuMTE0LDAuMjg2LDAuMTc0YzAuMDg4LDAuMDU0LDAuMTc0LDAuMTA1LDAuMjY1LDAuMTUzICAgYzAuMSwwLjA1NiwwLjE5OSwwLjEsMC4yOTgsMC4xNDdjMC4wOTcsMC4wNDUsMC4xOSwwLjA5MSwwLjI4MywwLjEzMmMwLjA5OCwwLjA0LDAuMTk2LDAuMDcyLDAuMjk1LDAuMTA1ICAgYzAuMTA0LDAuMDM4LDAuMjA3LDAuMDc4LDAuMzEyLDAuMTA5YzAuMTAxLDAuMDMsMC4xOTcsMC4wNTIsMC4yOTcsMC4wNzdjMC4xMDgsMC4wMjMsMC4yMTQsMC4wNTgsMC4zMjQsMC4wNzggICBjMC4xMTUsMC4wMjEsMC4yMzEsMC4wMzMsMC4zNDYsMC4wNTRjMC4wOTcsMC4wMTUsMC4xOTIsMC4wMzIsMC4yODksMC4wNDJjMC40MywwLjA0MiwwLjg2NSwwLjA0MiwxLjI5NSwwICAgYzAuMS0wLjAxLDAuMTkxLTAuMDI3LDAuMjg5LTAuMDQyYzAuMTE0LTAuMDIxLDAuMjMzLTAuMDI5LDAuMzQ0LTAuMDU0YzAuMTA5LTAuMDIxLDAuMjE3LTAuMDU1LDAuMzI0LTAuMDc4ICAgYzAuMTAyLTAuMDI1LDAuMTk5LTAuMDQ3LDAuMjk5LTAuMDc3YzAuMTA1LTAuMDMxLDAuMjA3LTAuMDcxLDAuMzEyLTAuMTA5YzAuMTAyLTAuMDMsMC4xOTUtMC4wNjIsMC4yOTUtMC4xMDUgICBjMC4wOTYtMC4wNDEsMC4xOTEtMC4wODcsMC4yODMtMC4xMzJjMC4xLTAuMDQ4LDAuMTk5LTAuMDkyLDAuMjk3LTAuMTQ3YzAuMDkxLTAuMDQ4LDAuMTc3LTAuMTA0LDAuMjY0LTAuMTUzICAgYzAuMDk4LTAuMDYsMC4xOTMtMC4xMSwwLjI4Ny0wLjE3NGMwLjA5Ni0wLjA2NCwwLjE4OS0wLjE0MSwwLjI4MS0wLjIwNmMwLjA3Ni0wLjA2MiwwLjE1Ni0wLjExMywwLjIzMy0wLjE3NiAgIGMwLjI0OS0wLjIwNCwwLjQ3OS0wLjQzNywwLjY5NC0wLjY3YzAuMDc2LTAuMDY3LDAuMTU0LTAuMTMxLDAuMjI5LTAuMjAzbDQzLjI5NC00My4yOTYgICBDMTIxLjU4MSw2NS40OTEsMTIxLjU4MSw2MS4zMzcsMTE5LjAxOSw1OC43NzYiLz48L2c+PC9zdmc+);background-size:20px}.spl-theme{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+PHN2ZyBoZWlnaHQ9IjI0cHgiIHZlcnNpb249IjEuMiIgdmlld0JveD0iMiAyIDIwIDIwIiB3aWR0aD0iMjRweCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSIjZmZmIj48cGF0aCBkPSJNMTIsNGMtNC40MTgsMC04LDMuNTgyLTgsOHMzLjU4Miw4LDgsOHM4LTMuNTgyLDgtOFMxNi40MTgsNCwxMiw0eiBNMTIsMThjLTMuMzE0LDAtNi0yLjY4Ni02LTZzMi42ODYtNiw2LTZzNiwyLjY4Niw2LDYgUzE1LjMxNCwxOCwxMiwxOHoiLz48cGF0aCBkPSJNMTIsN3YxMGMyLjc1NywwLDUtMi4yNDMsNS01UzE0Ljc1Nyw3LDEyLDd6Ii8+PC9nPjwvc3ZnPg==)}.spl-play{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjI0IiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIiB2aWV3Qm94PSItMC41IC0wLjUgMjUgMjUiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIvPjxwb2x5Z29uIGZpbGw9IiNmZmYiIHBvaW50cz0iMTAgOCAxNiAxMiAxMCAxNiAxMCA4Ii8+PC9zdmc+)}.spl-play.on{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjI0IiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIiB2aWV3Qm94PSItMC41IC0wLjUgMjUgMjUiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIvPjxsaW5lIHgxPSIxMCIgeDI9IjEwIiB5MT0iMTUiIHkyPSI5Ii8+PGxpbmUgeDE9IjE0IiB4Mj0iMTQiIHkxPSIxNSIgeTI9IjkiLz48L3N2Zz4=);animation:pulsate 1s ease infinite}.spl-close{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjI0IiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIiB2aWV3Qm94PSIyIDIgMjAgMjAiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48bGluZSB4MT0iMTgiIHgyPSI2IiB5MT0iNiIgeTI9IjE4Ii8+PGxpbmUgeDE9IjYiIHgyPSIxOCIgeTE9IjYiIHkyPSIxOCIvPjwvc3ZnPg==)}.spl-next,.spl-prev{top:50%;width:50px;height:50px;opacity:.65;background-color:rgba(0,0,0,.45);border-radius:100%;cursor:pointer;margin-top:-25px;transform:translateX(-100px);background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjI0IiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cG9seWxpbmUgcG9pbnRzPSIxNSAxOCA5IDEyIDE1IDYiLz48L3N2Zz4=);background-size:30px}.spl-prev{left:20px}.spl-next{left:auto;right:20px;transform:translateX(100px) scaleX(-1)}#spotlight.menu .spl-prev{transform:translateX(0)}#spotlight.menu .spl-next{transform:translateX(0) scaleX(-1)}@media (hover:hover){.spl-page~div{cursor:pointer;transition:opacity .2s ease}.spl-next:hover,.spl-page~div:hover,.spl-prev:hover{opacity:1}}@media (max-width:500px){.spl-header div{width:44px}.spl-footer .spl-title{font-size:20px}.spl-footer{font-size:14px}.spl-next,.spl-prev{width:35px;height:35px;margin-top:-17.5px;background-size:15px 15px}.spl-spinner{background-size:30px 30px}}.hide-scrollbars{overflow:hidden!important}","type":"text/css","tags":"$:/tags/Stylesheet"},"$:/plugins/sq/spotlight/styles":{"title":"$:/plugins/sq/spotlight/styles","type":"text/css","tags":"$:/tags/Stylesheet","text":".spl-pane video::-webkit-media-controls-timeline {\n\twidth: 90vw;\n}"},"$:/plugins/sq/spotlight/widget.js":{"title":"$:/plugins/sq/spotlight/widget.js","text":"/*\\\ntitle: $:/plugins/sq/spotlight/widget.js\ntype: application/javascript\nmodule-type: widget\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\nexports.platforms = [\"browser\"];\nif(!$tw.sq) {\n\t$tw.sq = {};\n}\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n\n\nvar SpotlightWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\n\n/*\nInherit from the base widget class\n*/\nSpotlightWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nSpotlightWidget.prototype.render = function(parent,nextSibling) {\n\tthis.parentDomNode = parent;\n\tthis.computeAttributes();\n\tthis.execute();\n\tthis.renderChildren(parent,nextSibling);\n};\n\nSpotlightWidget.prototype.execute = function() {\n\tvar images = $tw.utils.parseStringArray(this.getAttribute(\"$images\",\"\")),\n\t\tlabels = $tw.utils.parseStringArray(this.getAttribute(\"$labels\",\"\")),\n\t\tgalleryJSON = this.getAttribute(\"$gallery\"),\n\t\tstart = this.getAttribute(\"$start\"),\n\t\tspotlightOptions = {fit: \"contain\"},\n\t\tindex;\n\t\t\n\tif(!!galleryJSON) {\n\t\tthis.gallery = $tw.utils.parseJSONSafe(galleryJSON,[]);\n\t\t//iterate over gallery and turn each src attribute into proper form for each item where media type is image or undefined\n\t\tthis.gallery.map((item,pos,gallery) => {\n\t\t\tif(start && start === item.src) {\n\t\t\t\tindex = pos;\n\t\t\t}\n\t\t\tif(!item.media || item.media === \"image\") {\n\t\t\t\tgallery[pos].src = this.getImageURI(item.src);\n\t\t\t}\n\t\t},this);\n\t} else {\n\t\t//iterate over images and labels, create gallery\n\t\tif(start) {\n\t\t\tindex = images.indexOf(start);\n\t\t}\n\t\tthis.gallery = images.map((image,index,images) => {\n\t\t\treturn {src: this.getImageURI(image),title: labels[index] || \"\"};\n\t\t},this);\n\t\tif(index === -1) {\n\t\t\tthis.gallery.every((el,i) => {\n\t\t\t\tif(el.src === start) {\n\t\t\t\t\tindex = i;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t});\n\t\t}\n\t}\n\t\n\t$tw.utils.each(this.attributes,function(attribute,name) {\n\t\tif(name.charAt(0) !== \"$\") {\n\t\t\tspotlightOptions[name] = attribute;\n\t\t}\n\t});\n\tspotlightOptions.index = !!start && index >=0 ? index + 1 : 1;\n\tthis.spotlightOptions = spotlightOptions;\n\t/*\n\tthis.spotlightOptions.onchange = function(index,options) {\n\t\t//get the document reference from the widget\n\t\tvar pane = document.querySelectorAll(`#spotlight .spl-pane`);\n\t\tvar img = pane[index-1].querySelector(\"img\");\n\t\timg.addEventListener(\"load\",function() {\n\t\t\tconsole.log(`Width: ${img.width}`);\n\t\t});\n\t};\n\t*/\n};\n\nSpotlightWidget.prototype.getImageURI = function(title) {\n\tvar src = \"\",\n\t\ttiddler = this.wiki.getTiddler(title);\n\tif(!tiddler) {\n\t\treturn title;\n\t} else {\n\t\tif(this.wiki.isImageTiddler(title)) {\n\t\t\tvar type = tiddler.fields.type,\n\t\t\t\ttext = tiddler.fields.text,\n\t\t\t\t_canonical_uri = tiddler.fields._canonical_uri;\n\t\t\tif(text) {\n\t\t\t\tswitch(type) {\n\t\t\t\t\tcase \"image/svg+xml\":\n\t\t\t\t\t\tsrc = \"data:image/svg+xml,\" + encodeURIComponent(text);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tsrc = \"data:\" + type + \";base64,\" + text;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\t\t\t\t\n\t\t\t} else if(_canonical_uri) {\n\t\t\t\tsrc = _canonical_uri;\n\t\t\t}\n\t\t}\n\t\treturn src;\n\t}\n};\n\nSpotlightWidget.prototype.invokeAction = function(triggeringWidget, event) {\n\tvar spotlight = require(\"$:/plugins/sq/spotlight/spotlight.js\");\n\tspotlight.show(this.gallery,this.spotlightOptions);\n\t/*\n\t// exifreader needs to load the image itself, so CORS might be an issue for external images\n\t//\thttps://github.com/mattiasw/ExifReader/issues/186\n\tif(!$tw.sq.ExifReader) {\n\t\t$tw.sq.ExifReader = require(\"$:/plugins/sq/spotlight/exif-reader.js\");\n\t\tconsole.log($tw.sq.ExifReader);\t\t\n\t}\n\t*/\n\n};\n\nSpotlightWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\tif($tw.utils.count(changedAttributes)>0) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t} else {\n\t\treturn this.refreshChildren(changedTiddlers);\n\t}\n};\n\nexports[\"action-spotlight\"] = SpotlightWidget;\n\n})();","type":"application/javascript","module-type":"widget"}}}